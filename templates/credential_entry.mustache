{{!
    This template renders a single credential entry for the Skill Passport dashboard.

    @package    local_skillpassport
    @copyright  2024 John Mulama <johnmulama001@gmail.com>
    @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
    @author     John Mulama - Senior Software Engineer (johnmulama001@gmail.com)
}}

<div class="list-group-item list-group-item-action flex-column align-items-start skillpassport-credential-item mb-3 p-3 border rounded shadow-sm">
    <div class="d-flex w-100 justify-content-between">
        <h5 class="mb-1 text-primary">{{credential_type_string}}</h5>
        <small class="text-muted">{{issuedon}}</small>
    </div>
    <p class="mb-1"><strong>{{#str}}credentialfor, local_skillpassport{{/str}}:</strong>
        {{#itemurl}}
            <a href="{{itemurl}}" target="_blank">{{itemname}}</a>
        {{/itemurl}}
        {{^itemurl}}
            {{itemname}}
        {{/itemurl}}
    </p>

    <div class="mt-2 d-flex flex-wrap align-items-center">
        <a href="#" class="btn btn-sm btn-outline-secondary mr-2 view-details-btn" data-toggle="collapse" data-target="#credentialDetails{{id}}" role="button" aria-expanded="false" aria-controls="credentialDetails{{id}}">
            {{#str}}viewcredential, local_skillpassport{{/str}}
        </a>
        {{#blockchain_txhash}}
            <a href="{{verify_url}}" target="_blank" class="btn btn-sm btn-outline-success mr-2">
                {{#str}}verifyonblockchain, local_skillpassport{{/str}}
            </a>
        {{/blockchain_txhash}}

        {{#can_issue_nft}}
            {{^has_nft}}
                <form action="{{mint_nft_url}}" method="post" class="d-inline-block mint-nft-form">
                    <input type="hidden" name="sesskey" value="{{sesskey}}">
                    <input type="hidden" name="credentialid" value="{{id}}">
                    <button type="submit" class="btn btn-sm btn-outline-info mr-2">
                        {{#str}}mintnftbadge, local_skillpassport{{/str}}
                    </button>
                </form>
            {{/has_nft}}
            {{#has_nft}}
                <a href="{{nft_metadata_url}}" target="_blank" class="btn btn-sm btn-info mr-2">
                    NFT Minted (Token: {{tokenid}}) 
                </a>
            {{/has_nft}}
        {{/can_issue_nft}}
    </div>

    <div class="collapse mt-3 credential-details" id="credentialDetails{{id}}">
        <div class="card card-body bg-light">
            <h6>{{#str}}credentialdetails, local_skillpassport{{/str}}</h6>
            <p><small><strong>User:</strong> {{fullname}}</small></p>
            {{#blockchain_txhash}}
                <p><small><strong>{{#str}}blockchaintxhash, local_skillpassport{{/str}}:</strong> {{blockchain_txhash}}</small></p>
            {{/blockchain_txhash}}
        </div>
    </div>
</div>
